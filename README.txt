Домашние задание к Уроку-7.
====================================
Урок 7. Python: от простого к практике
Задание в группах: Создать телефонный справочник с возможностью
импорта и экспорта данных в нескольких форматах. (Применить MVC)

ТЗ:
Операции с телефонным справочником:
1. Вывод контактов
2. Добавление контакта ФИО и телефон
3. Удаление контакта
4. Поиск контакта по имени и вывести список найденных контактов с заданным именем
5. Выгрузка в формате CSV, txt или JSON (экспорт)
6. Загрузка списка контактов из файлика выбранного формата
7. Редактирование контакта

Пример структуры:
contacts = [
{ "fio": "ivan petrov", "phone": "12345 },
{ "fio": "max petrov", "phone": "12333345 },
....
]


============================================
Структура приложения:
Варианты названия модулей
============================================
Вариант-1:
# view_db
# directory_db
# controller_db

Вариант-2:
# td_view
# td_directory
# td_controller


1. main.py:
============
Главный модуль - точка входа (запуска) приложения.
Здесь может быть размещено первое сообщение - аннотация, которое выдается единственный раз,
в начале запуска приложения. Далее - запуск собственно приложения, в т.ч. с перечислением
внешних параметров, определяющих особенность его использования и/или режим работы.
Методы:
welcome_message       - приветственное сообщение, краткая информация о приложении
td_controller(**arg)  - вызов приложения с передачей ему параметров (если предусмотрено)


2. td_directory:
==================
Model - Модель приложения (методы обеспечивающие взаимодействия с базой данных)
Включает методы, отвечающие за взаимодействие с базой данных "Контакты" (contacts)

Методы:
----------------
Основные: -------------------------------
init            - инициализация литеральных и прочих данных
get_contacts (chn_contacts) - получение данных о контактах в соответствии с полученным отбором
                              (открытие канала для последовательного получения данных о контактах)
get_structure   - получить структуру базы данных (телефонного справочника)
add_contact     - добавление нового контакта
del_contact     - удаление контакта
upd_contact     - обновление данных контакта в базе данных
upload_contacts - запись загруженных данных в базу в режиме (замещения c одинаковым id и/или добавление новых)

Для внутреннего пользования: ------------
rand_collections- Коллекция данных для случайного заполнения базы данных
get_slice       - Получение среза справочника
get_uniqid      - Формирование и передача уникального ключа.


3. td_view:
=============
View - Передача-получение данных в файл, с выводом на консоль (интерфейс)

Методы:
--------------
operation_menu  - общее меню операция ('-F', '-E', '-R', '-H', '-Q')
                  (Файл: export, import; Редактирование: добавление, удаление, изменение; Отчет; Помощь; Выход)
menu_editing    - подменю выбора операций редактирования
menu_file       - подменю выбора операций файлового обмена (загрузка / выгрузка справочника)
menu_view       - подменю выбора операций вывода данных контактов из справочника
output_instr    - вывод инструкции
output_contacts - вывод данных о контактах
input_request   - запрос данных о контакте (запрос по ID, по ФИО, Имени, по интервалу от ... до) для целей:
                    - вывода данных о найденных контактах (по поисковому запросу или отбору)
                    - установки фокуса (установка текущего контакта) с последующим удалением или редактированием
input_contacts  - ввод данных контакта -ов ('Добавление новых контактов:')
editing_contact - редактирование выбранного контакта
select_format   - выбор формата файла для экспорта (CSV, txt или JSON)
import_method   - выбор способа импорта (загрузки) данных в справочник (только измененные, добавление только новых)
output_message  - вывод сообщений о результатах выполнения операций, в т.ч. инструкций, подсказок и пр.


4. td_controller:
==================
Controller - обмен данными между Model и View, а также их (данных) пред- или пост- обработка

Методы:
---------------
manager         - Основное тело (локальный main)
export_contacts - экспорт полученных данных (запись в файл, указанного формата)
import_contacts - импорт данных (загрузка данных из файла указанного формата)

Псевдокод:
-----------------
# получить глобальные параметры модели
structure_db, id_name, _, _, all_db, export_file, formats_file = dr.get_params_model()

def manager(**karg):

    init()                                                              # инициализация модели базы данных

    while True:
        операция = operation_menu()                                     # запрос операции над телеф. справочником
        if myl.check_exit(операция)                                     # Выход
            break

        elif операция = '-h':
            output_instr()

        elif операция = '-r':                                                   # Вывод данных о контакте, в т.ч. поиск по имени
            request      = input_request(операция, structure_db, all_db=all_db)    # формат request = (от, до, filter_dict)
                                                                                # формат filter_dict = {[поле]: [значение]}
            contacts_gen = get_contacts(request)
            output_contacts(contacts_gen)

        elif операция = '-а':                                                   # Добавление контакта
            contacts_add = input_contacts(операция, structure_db)
            adding_contacts(contacts_add)

        elif операция = '-e':                                                   # Редактирование данных контакта
            select      = input_request(операция, id_name)
            contact_edt = get_contacts({id_name: select})
            contact_mod = editing_contact(contact_edt, structure_db)            # полная запись контакта вместе с ключом
            update_contact(contact_mod)

        elif операция = '-d':                                                   # Удаление контакта
            select      = input_request(операция, id_name)
            contact_id = get_contacts({id_name: select})                        # только id контакта
            del_contact(contact_id)

        elif операция = '-l':                                                   # Экспорт справочника (выгрузка)
            request      = input_request(операция, structure_db, all_db=all_db)
            contacts_gen = get_contacts(request)
            format_file  = select_format(formats_file)
            export_contacts(contacts_gen, format_file)

        elif операция = '-s':                                                   # Импорт справочника (загрузка)
            method = import_method()
            contacts_upload = import_contacts(method)
            upload_contacts(contacts_upload, method=method)


5. td_tools:
==================
Tools - разные инструменты, прочие методы общего обеспечения, для доступа из разных модулей для данного приложения

Методы:
---------------
None

import td_controller as td_c

print('Телефонный справочник:')
print('----------------------')
td_c.manager()



